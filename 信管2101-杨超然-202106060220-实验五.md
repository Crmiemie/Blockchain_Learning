 <img src="/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-08-31 09.48.04.png" alt="截屏2023-08-31 09.48.04" style="zoom:60%;" />

| **报告名称**：   | 实验五：*Hyperledger Fabric Explorer* 浏览器部署实战 |
| ---------------- | ---------------------------------------------------- |
| **学生姓名：**   | 杨超然                                               |
| **学生学号：**   | 202106060220                                         |
| **专业班级：**   | 信管2101班                                           |
| **学**  **院：** | 工商管理学院                                         |
| **指导老师：**   | 周中定                                               |
| **日  期：**     | 2023.10.13                                           |

------

[TOC]

------

![截屏2023-10-13 09.00.21](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-13 09.00.21.png)

Hyperledger Explorer是一个简单，强大，易于使用，维护良好的开源实用程序，用于浏览底层区块链网络上的活动。用户可以在MacOS和Ubuntu上配置和构建Hyperledger Explorer。

# 一、Hyperledger Explorer参考教程

> ***Hyperledger Explorer*视频教程**
>
> https://www.bilibili.com/video/BV1yQ4y1Z7sJ/?spm_id_from=333.999.0.0&vd_source=1eecda9234223595880a3a83e762d22e

> Hyperledger Fabric项目搭建区块链浏览器
>
> [Hyperledger Fabric项目搭建区块链浏览器Hyperledger-blockchain-explorer_Pistachiout的博客-CSDN博客](https://blog.csdn.net/qq_45808700/article/details/130183648)

> *Hyperledger Fabric项目搭建区块链浏览器Explorer* 代码库
>
> 是一个简单、强大、易于使用、维护良好的开源工具，可以浏览底层区块链网络上的活动。 项目地址：[https://github.com/hyperledger/blockchain-explorer](https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fhyperledger%2Fblockchain-explorer)

本报告参考教程：

[视频教程](https://www.bilibili.com/video/BV1yQ4y1Z7sJ/?spm_id_from=333.999.0.0&vd_source=1eecda9234223595880a3a83e762d22e)

![截屏2023-10-14 08.23.19](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-14 08.23.19.png)

[官方源码储存库](https://gitcode.com/mirrors/hyperledger/blockchain-explorer/overview)

![截屏2023-10-14 08.25.08](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-14 08.25.08.png)

**当前版本**

| 资源管理器版本                                               | 支持的架构版本                                               | 支持的节点JS版本                                             |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **[v2.0.0](https://github.com/hyperledger-labs/blockchain-explorer/blob/main/release_notes/v2.0.0.md)** （05年2023月<>日） | [2.2、2.4 版、2.5 版](https://hyperledger-fabric.readthedocs.io/en/release-2.5) | [^12.13.1， ^14.13.1， ^16.14.1](https://nodejs.org/en/download/releases) |

其他版本信息仅供参考：

![截屏2023-10-14 08.26.25](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-14 08.26.25.png)

# 二、配置文件下载

可以通过[Hyperledger Explorer官网](https://github.com/hyperledger/blockchain-explorer)查看所需的配置文件和部署过程

![截屏2023-10-13 16.34.55](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-13 16.34.55.png)

创建explorer文件夹，并通过如下代码下载下面的三个配置文件：

![截屏2023-10-13 16.40.26](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-13 16.40.26.png)

```bash
# 在项目目录创建文件夹，并在org1部署区块浏览器
cd ~/go/src/github.com/hyperledger
mkdir explorer
cd explorer

# 下载配置文件
wget https://raw.githubusercontent.com/hyperledger/blockchain-explorer/main/examples/net1/config.json
wget https://raw.githubusercontent.com/hyperledger/blockchain-explorer/main/examples/net1/connection-profile/test-network.json -P connection-profile
wget https://raw.githubusercontent.com/hyperledger/blockchain-explorer/main/docker-compose.yaml
```

如果虚拟机没有联网，导致下载不下来，也可以前往[Fabric-explorer](https://download.csdn.net/download/qq_45808700/87971964)进行下载，之后在本地根据需要修改，修改后上传到虚拟机

**注：**这个命令似乎无法正常拉取文件了，可以直接查看每个文件里面都有什么内容,然后手动复制粘贴到我们的项目当中去

- [docker-compose.yaml](https://github.com/hyperledger/blockchain-explorer/blob/main/docker-compose.yaml)

- [examples/net1/connection-profile/test-network.json](https://github.com/hyperledger/blockchain-explorer/blob/main/examples/net1/connection-profile/test-network.json)
- [examples/net1/config.json](https://github.com/hyperledger/blockchain-explorer/blob/main/examples/net1/config.json)

![截屏2023-10-14 08.36.07](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-14 08.36.07.png)

全部下载完毕之后的目录结果如下所示：

![截屏2023-10-14 08.48.45](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-14 08.48.45.png)

笔者依据视频教程，创建了两个组织org1和org2，最终的项目结构如下所示：

![截屏2023-10-14 08.53.37](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-14 08.53.37.png)

# 三、使用Docker搭建Hyperledger Explorer

## （一）前置条件

- docker
- docker-compose 
  - **注意（适用于v2.0.0及以上版本）：**启动 docker-compose 时，会自动从 **GHCR 而不是 Docker Hub 中提取以下 docker 映像**。
    - [Hyperledger Explorer ghcr repository](https://github.com/hyperledger-labs/blockchain-explorer/pkgs/container/explorer)
    - [Hyperledger Explorer PostgreSQL ghcr repository](https://github.com/hyperledger-labs/blockchain-explorer/pkgs/container/explorer-db)
  - **注意（适用于v1.1.8及以下版本）：**启动 docker 编写时，会自动从 Docker Hub 中提取以下 docker 映像。
    - [Hyperledger Explorer docker repository](https://hub.docker.com/r/hyperledger/explorer/)
    - [Hyperledger Explorer PostgreSQL docker repository](https://hub.docker.com/r/hyperledger/explorer-db)

## （二）启动Hyperledger Fabric test-network网络

在本指南中，我们假设您已经按照[Hyperledger Fabric官方教程](https://hyperledger-fabric.readthedocs.io/en/latest/test_network.html)启动了测试网络。

```bash
$ cd ~/go/src/github.com/hyperledger/fabric-samples/test-network
$ ./network.sh up
$ ./network.sh createChannel
$ ./network.sh deployCC -ccn basic -ccp ../asset-transfer-basic/chaincode-go -ccl go
```

![截屏2023-10-16 10.51.09](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.51.09.png)

![截屏2023-10-16 10.53.12](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.53.12.png)

![截屏2023-10-16 10.55.24](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.55.24.png)

![截屏2023-10-16 11.20.27](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 11.20.27.png)

## （三）配置及修改说明

### 1.目录创建

创建一个新目录（例如`explorer`)

```bash
cd ~/go/src/github.com/hyperledger
mkdir explorer
cd explorer
```

从存储库复制以下文件

- [.env](https://github.com/hyperledger/blockchain-explorer/blob/main/.env)
- [docker-compose.yaml](https://github.com/hyperledger/blockchain-explorer/blob/main/docker-compose.yaml)
- [examples/net1/connection-profile/test-network.json](https://github.com/hyperledger/blockchain-explorer/blob/main/examples/net1/connection-profile/test-network.json)
- [examples/net1/config.json](https://github.com/hyperledger/blockchain-explorer/blob/main/examples/net1/config.json)

```bash
wget https://raw.githubusercontent.com/hyperledger/blockchain-explorer/main/examples/net1/config.json
wget https://raw.githubusercontent.com/hyperledger/blockchain-explorer/main/examples/net1/connection-profile/test-network.json -P connection-profile
wget https://raw.githubusercontent.com/hyperledger/blockchain-explorer/main/docker-compose.yaml
```

复制fabric-samples/test-networ测试网络（例如 ：fabric-samples/test-network）目录下organizations目录（组织/）到当前(explorer)目录：

```bash
cp -r ../fabric-samples/test-network/organizations/ .
```

当然，如果利用.env的方式导入环境变量，不需要这一步拷贝，可以直接设置环境变量到fabric-samples/test-network/organizations/，现在，您应该具有以下文件和目录结构。

```bash
docker-compose.yaml
config.json
connection-profile/test-network.json
organizations/ordererOrganizations/
organizations/peerOrganizations/
```

### 2.修改test-network.json 配置

```bash
cd ~/go/src/github.com/hyperledger/explorer/connection-profile
# 先修改test-network.json文件为org1-network.json
mv test-network.json org1-network.json
# 进入修改org1-network.json中对应参数
vim org1-network.json
# 修改证书连接文件
# 将用户的证书替换为连接配置文件 （test-network.json） 中的管理员证书和机密（私钥）

#修改前
"adminPrivateKey": {
    "path": "/tmp/crypto/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp/keystore/priv_sk"
}

#修改后，将User1@org1.example.com改为Admin@org1.example.com
"adminPrivateKey": {
    "path": "/tmp/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/keystore/priv_sk"
}

# 修改完毕保存退出

# 拷贝一份并命名为org2-network.json
cp org1-network.json org2-network.json
# 修改org2-network.json中对应参数
vim org2-network.json
#将所有的Org1修改文Org2，如下所示
Org1MSP -----> Org2MSP，org1 -----> org2
# 修改完毕保存退出

#或者使用sed
sed -i "s/org1/org2/g" org2-network.json
sed -i "s/Org1/Org2/g" org2-network.json
```

### 3.修改config.json—多网络节点配置文件

```json
# config.json文件内只配置了一个组织的网络，所以需要添加第二个组织网络

vim config.json
# 修改为以下配置
{
  "network-configs": {
        "org1-network": {
             "name": "org1-network",
             "profile": "./connection-profile/org1-network.json"		// 对应配置文件
        },
       "org2-network": {
             "name": "org2-network",
             "profile": "./connection-profile/org2-network.json"		// 对应配置文件
                }
  },
        "license": "Apache-2.0"
}
# 修改完毕后退出

```



编辑环境变量以与您的环境保持一致`docker-compose.yaml`

```yaml
# SPDX-License-Identifier: Apache-2.0
version: '2.1'

volumes:
  pgdata:
  walletstore:


networks:
  mynetwork.com:
    name: fabric_test

services:

  explorerdb.mynetwork.com:
    image: ghcr.io/hyperledger-labs/explorer-db:latest
    container_name: explorerdb.mynetwork.com
    hostname: explorerdb.mynetwork.com
    environment:
      - DATABASE_DATABASE=fabricexplorer
      - DATABASE_USERNAME=hppoc
      - DATABASE_PASSWORD=password
    healthcheck:
      test: "pg_isready -h localhost -p 5432 -q -U postgres"
      interval: 30s
      timeout: 10s
      retries: 5
    volumes:
      - pgdata:/var/lib/postgresql/data
    networks:
      - mynetwork.com

  explorer.mynetwork.com:
    image: ghcr.io/hyperledger-labs/explorer:latest
    container_name: explorer.mynetwork.com
    hostname: explorer.mynetwork.com
    environment:
      - DATABASE_HOST=explorerdb.mynetwork.com
      - DATABASE_DATABASE=fabricexplorer
      - DATABASE_USERNAME=hppoc
      - DATABASE_PASSWD=password
      - LOG_LEVEL_APP=info
      - LOG_LEVEL_DB=info
      - LOG_LEVEL_CONSOLE=debug
      - LOG_CONSOLE_STDOUT=true
      - DISCOVERY_AS_LOCALHOST=false

    volumes:
      - ${EXPLORER_CONFIG_FILE_PATH}:/opt/explorer/app/platform/fabric/config.json
      - ${EXPLORER_PROFILE_DIR_PATH}:/opt/explorer/app/platform/fabric/connection-profile
      - ${FABRIC_CRYPTO_PATH}:/tmp/crypto
      - walletstore:/opt/explorer/wallet

    ports:
      - 8080:8080

    depends_on:
      explorerdb.mynetwork.com:
        condition: service_healthy

    networks:
      - mynetwork.com
```

另一种选择是在 shell 中导出环境变量。

```bash
export EXPLORER_CONFIG_FILE_PATH=./config.json
export EXPLORER_PROFILE_DIR_PATH=./connection-profile
export FABRIC_CRYPTO_PATH=./organizations
```



当您通过桥接网络将资源管理器连接到结构网络时，需要设置为 以禁用主机名映射到本地主机。`DISCOVERY_AS_LOCALHOST`false`

```bash
services:

  ...

  explorer.mynetwork.com:

    ...

    environment:
      - DISCOVERY_AS_LOCALHOST=false
```



将用户的证书替换为连接配置文件 （test-network.json） 中的管理员证书和机密（私钥）。需要在资源管理器容器上指定绝对路径。

以前：

```bash
	"organizations": {
		"Org1MSP": {
			"mspid": "Org1MSP",
			"adminPrivateKey": {
				"path": "/tmp/crypto/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp/keystore/priv_sk"
			},
			"peers": [
				"peer0.org1.example.com"
			],
			"signedCert": {
				"path": "/tmp/crypto/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp/signcerts/User1@org1.example.com-cert.pem"
			}
		}
	},
```

后：

```bash
	"organizations": {
		"Org1MSP": {
			"mspid": "Org1MSP",
			"adminPrivateKey": {
				"path": "/tmp/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/keystore/priv_sk"
			},
			"peers": [
				"peer0.org1.example.com"
			],
			"signedCert": {
				"path": "/tmp/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/signcerts/Admin@org1.example.com-cert.pem"
			}
		}
	},
```

### 4.最终目录结构

![截屏2023-10-14 08.56.28](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-14 08.56.28.png)

# 四、所有配置文件内容说明

## （一）docker-compose.yaml

```yaml
# SPDX-License-Identifier: Apache-2.0
version: '2.1'

volumes:
  pgdata:
  walletstore:


networks:
  mynetwork.com:
    name: fabric_test

services:

  explorerdb.mynetwork.com:
    image: ghcr.io/hyperledger-labs/explorer-db:latest
    container_name: explorerdb.mynetwork.com
    hostname: explorerdb.mynetwork.com
    environment:
      - DATABASE_DATABASE=fabricexplorer
      - DATABASE_USERNAME=hppoc
      - DATABASE_PASSWORD=password
    healthcheck:
      test: "pg_isready -h localhost -p 5432 -q -U postgres"
      interval: 30s
      timeout: 10s
      retries: 5
    volumes:
      - pgdata:/var/lib/postgresql/data
    networks:
      - mynetwork.com

  explorer.mynetwork.com:
    image: ghcr.io/hyperledger-labs/explorer:latest
    container_name: explorer.mynetwork.com
    hostname: explorer.mynetwork.com
    environment:
      - DATABASE_HOST=explorerdb.mynetwork.com
      - DATABASE_DATABASE=fabricexplorer
      - DATABASE_USERNAME=hppoc
      - DATABASE_PASSWD=password
      - LOG_LEVEL_APP=info
      - LOG_LEVEL_DB=info
      - LOG_LEVEL_CONSOLE=debug
      - LOG_CONSOLE_STDOUT=true
      - DISCOVERY_AS_LOCALHOST=false

    volumes:
      - ${EXPLORER_CONFIG_FILE_PATH}:/opt/explorer/app/platform/fabric/config.json
      - ${EXPLORER_PROFILE_DIR_PATH}:/opt/explorer/app/platform/fabric/connection-profile
      - ${FABRIC_CRYPTO_PATH}:/tmp/crypto
      - walletstore:/opt/explorer/wallet

    ports:
      - 8080:8080

    depends_on:
      explorerdb.mynetwork.com:
        condition: service_healthy

    networks:
      - mynetwork.com
```

![截屏2023-10-16 10.57.49](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.57.49.png)

## （二）config.json

```json
{
	"network-configs": {
		"org1-network": {
			"name": "Org1-Network",
			"profile": "./connection-profile/org1-network.json"
		},
		"org2-network": {
			"name": "Org2-Network",
			"profile": "./connection-profile/org2-network.json"
		}
	},
	"license": "Apache-2.0"
}
```

![截屏2023-10-16 10.58.13](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.58.13.png)

## （三）env

```bash
PORT=8080
EXPLORER_CONFIG_FILE_PATH=./config.json
EXPLORER_PROFILE_DIR_PATH=./connection-profile
FABRIC_CRYPTO_PATH=/home/magpie/go/src/github.com/hyperledger/fabric-samples/test-network/organizations
```

![截屏2023-10-16 10.58.31](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.58.31.png)

## （四）org1-network.json

```json
{
	"name": "org1-network",
	"version": "1.0.0",
	"client": {
		"tlsEnable": true,
		"adminCredential": {
			"id": "exploreradmin",
			"password": "exploreradminpw"
		},
		"enableAuthentication": true,
		"organization": "Org1MSP",
		"connection": {
			"timeout": {
				"peer": {
					"endorser": "300"
				},
				"orderer": "300"
			}
		}
	},
	"channels": {
		"mychannel": {
			"peers": {
				"peer0.org1.example.com": {}
			}
		}
	},
	"organizations": {
		"Org1MSP": {
			"mspid": "Org1MSP",
			"adminPrivateKey": {
				"path": "/tmp/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/keystore/priv_sk"
			},
			"peers": [
				"peer0.org1.example.com"
			],
			"signedCert": {
				"path": "/tmp/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/signcerts/Admin@org1.example.com-cert.pem"
			}
		}
	},
	"peers": {
		"peer0.org1.example.com": {
			"tlsCACerts": {
				"path": "/tmp/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt"
			},
			"url": "grpcs://peer0.org1.example.com:7051"
		}
	}
}
```

![截屏2023-10-16 10.58.49](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.58.49.png)

## （五）org2-network.json

```json
{
	"name": "org2-network",
	"version": "1.0.0",
	"client": {
		"tlsEnable": true,
		"adminCredential": {
			"id": "exploreradmin",
			"password": "exploreradminpw"
		},
		"enableAuthentication": true,
		"organization": "Org2MSP",
		"connection": {
			"timeout": {
				"peer": {
					"endorser": "300"
				},
				"orderer": "300"
			}
		}
	},
	"channels": {
		"mychannel": {
			"peers": {
				"peer0.org2.example.com": {}
			}
		}
	},
	"organizations": {
		"Org2MSP": {
			"mspid": "Org2MSP",
			"adminPrivateKey": {
				"path": "/tmp/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp/keystore/priv_sk"
			},
			"peers": [
				"peer0.org2.example.com"
			],
			"signedCert": {
				"path": "/tmp/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp/signcerts/Admin@org2.example.com-cert.pem"
			}
		}
	},
	"peers": {
		"peer0.org2.example.com": {
			"tlsCACerts": {
				"path": "/tmp/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt"
			},
			"url": "grpcs://peer0.org2.example.com:9051"
		}
	}
}
```

![截屏2023-10-16 10.59.07](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.59.07.png)

# 五、启动容器服务

- 在explorer目录下，运行以下命令以在启动结构网络后启动探索和资源管理器数据库服务：

  ```bash
  $ docker-compose up -d
  ```

![截屏2023-10-16 11.24.47](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 11.24.47.png)

![截屏2023-10-16 15.28.06](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 15.28.06.png)

在该目录下使用docker ps -a查看，可以发现已经生成了类似于17200d521253   ghcr.io/hyperledger-labs/explorer:latest的内容：

![截屏2023-10-16 15.32.39](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 15.32.39.png)

# 六、停止服务操作

- 若要在不删除持久性数据的情况下停止服务，请运行以下命令：

  ```bash
  $ docker-compose down
  ```

  ![截屏2023-10-16 15.33.56](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 15.33.56.png)

- 在docker-compose.yaml中，为持久数据分配了两个命名卷（用于Postgres数据和用户钱包）。如果要清除这些命名卷，请运行以下命令：

  ```bash
  $ docker-compose down -v
  ```

  ![截屏2023-10-16 15.53.17](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 15.53.17.png)
  
  

# 七、报错及解决方案

**1.fabric-ca-client binary not found..**

一个从上次实验延续此的报错，在启动测试网络的时候显示找不到fabric-ca-client的二进制文件：

![截屏2023-10-13 20.20.46](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-13 20.20.46.png)

**解决方案：**在上个实验中笔者以为是没有这个文件，就重新进行了拉取，但似乎并不能解决问题。后来发现fabric和fabric-ca中，cmd目录下就有这些二进制文件，但是在fabric-samples中就没有，于是便在fabric- samples中新建bin目录，将那些二进制文件放进去即可

<img src="/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-13 20.20.33.png" alt="截屏2023-10-13 20.20.33" style="zoom:50%;" />

2.**Cannot run peer because cannot init crypto, specified path "/home/hadoop/go/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp" does not exist or cannot be accessed: stat /home/hadoop/go/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp: no such file or directory**

解决报错一后，不会报找不到二进制文件的错了，但依旧无法启动：

![截屏2023-10-13 20.22.51](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-13 20.22.51.png)

解决方案：需要配置`msp`的路径，在终端输入：

```bash
sudo vim ~/.bashrc
```

添加如下路径：

```bash
export CORE_PEER_MSPCONFIGPATH=${PWD}/go/src/github.com/hyperledger/fabric/msp
export FABRIC_CFG_PATH=$PWD/go/src/github.com/hyperledger/fabric-samples/config$
export CORE_PEER_TLS_ENABLED=true
export CORE_PEER_LOCALMSPID="Org1MSP"
export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
export CORE_PEER_ADDRESS=localhost:7051
```

完成后输入：

```bash
source ~/.bashrc
```

**3.cryptogen tool not found. exiting**

启动测试网络报错：

![截屏2023-10-16 10.30.27](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 10.30.27.png)

**解决方案：**原因是上个实验中没有编译安装cryptogen，需要在fabric根目录中输入：

```bash
CGO_CFLAGS=" " \
go install -tags "" -ldflags "$LD_FLAGS" \
github.com/hyperledger/fabric/cmd/cryptogen
```

**4.Chaincode definition approved on peer0.org1 on channel ‘mychannel‘ failed Deploying chaincode**

输入如下指令时报错

```bash
$ ./network.sh deployCC -ccn basic -ccp ../asset-transfer-basic/chaincode-go -ccl go
```

![截屏2023-10-16 11.04.15](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 11.04.15.png)

**解决方案：**原因是没有在创建通道的情况下部署链码，要先输入

```bash
$ ./network.sh createChannel
```

**5.After 5 attempts, peer0.org1 has failed to join channel 'mychannel'** 

创建通道时报错：

![截屏2023-10-16 11.16.57](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 11.16.57.png)

**解决方案：**在链码路径下执行：

```bash
go mod vendor
```

![截屏2023-10-16 11.18.31](/Users/yangchaoran/Library/Application Support/typora-user-images/截屏2023-10-16 11.18.31.png)

# 八、实验心得

在本周的学习中，我深入了解了Hyperledger Fabric Explorer浏览器部署的相关知识，在这个浏览器上，我们可以观察整个区块链上的块数、节点数、通道、链码等等。通过实际操作，我对这一领域有了更深入的认识。

学习过程中，我首先了解了Hyperledger Fabric Explorer的基本概念和作用，它是Hyperledger Fabric网络中的一种浏览器，可以帮助开发者和管理员浏览和管理Hyperledger Fabric网络。在理解了其基本原理后，我开始了安装和配置过程。我按照官方文档的指引，逐步完成了安装和基本配置。在这个过程中，我遇到了一些问题，比如安装顺序、配置文件的解析等，但通过查阅文档和在线搜索，我都一一解决了。

在实验过程中，我深刻体会到了Hyperledger Fabric Explorer的强大功能。它不仅可以帮助我们快速了解网络的健康状况，还可以实时监测交易的状态和结果。此外，它还提供了可视化界面，使得管理员可以更方便地管理网络资源和交易。

在反思实验过程时，我认为自己在配置文件的理解和管理方面还有待提高。尽管我已经按照官方文档进行了操作，但为了更好地掌握相关知识，我计划在未来进一步熟悉和理解Hyperledger Fabric Explorer的配置文件和命令行工具。

通过本次实验，我对Hyperledger Fabric Explorer浏览器部署有了更深入的了解。我认为，这种浏览器对于Hyperledger Fabric网络的开发和管理工作至关重要，它为我们提供了一个直观、易用的界面，大大简化了网络的管理和监控工作。在未来的学习中，我将继续深入了解相关的技术和工具，提升自己的实践能力，更好地理解和应用区块链技术。
